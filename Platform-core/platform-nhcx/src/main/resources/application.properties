# The application name is used for Consul service registration and Vault/Consul config paths.
spring.application.name=platform-nhcx

# Default port for the service
server.port=8085

# Modern Spring Cloud configuration import.
# This tells the application to fetch configuration from Consul's KV store and Vault.
# The paths are conventional (config/<app-name>/ and secret/<app-name>).
# Specific profiles can override these imports if needed.
spring.config.import=optional:consul:, optional:vault:

# --- Consul Configuration ---
# Address of the Consul agent.
spring.cloud.consul.host=localhost
spring.cloud.consul.port=8500
# Configuration for how this service is registered in Consul.
spring.cloud.consul.discovery.service-name=${spring.application.name}
spring.cloud.consul.discovery.prefer-ip-address=true
# Enables Consul for configuration management.
spring.cloud.consul.config.enabled=true
spring.cloud.consul.config.prefix=config
spring.cloud.consul.config.default-context=${spring.application.name}
spring.cloud.consul.config.format=properties

# --- Vault Configuration ---
# Address of the Vault server.
spring.cloud.vault.host=localhost
spring.cloud.vault.port=8200
spring.cloud.vault.scheme=http
# A root token for development. In production, this should be handled via AppRole or other auth methods.
spring.cloud.vault.token=root
# Configures the KV secret backend.
spring.cloud.vault.kv.enabled=true
spring.cloud.vault.kv.backend=secret
spring.cloud.vault.kv.application-name=${spring.application.name}

# --- Application Specific Properties (defaults, to be managed in Consul/Vault) ---

# HCX Gateway Configuration (placeholders to be set in Consul)
hcx.gateway.base-path=
hcx.recipient.code=
hcx.sender.code=
hcx.jwks.url=

# Kafka Configuration (placeholders to be set in Consul)
kafka.bootstrap-servers=localhost:9092
kafka.topic.nhcx-events=nhcx.events
kafka.topic.nhcx-audit=nhcx.audit

# Database Configuration (secrets like password will come from Vault)
spring.datasource.url=jdbc:mysql://localhost:3306/nhcx_db?useSSL=false
spring.datasource.username=root
spring.datasource.password=
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true

# Logging Configuration
logging.level.com.ican.cortex.platform.nhcx=INFO
logging.level.org.springframework.web=INFO
logging.level.org.hibernate=INFO

# Actuator Endpoints
management.endpoints.web.exposure.include=health,info,prometheus,loggers
management.endpoint.health.show-details=always
management.metrics.tags.application=${spring.application.name}
